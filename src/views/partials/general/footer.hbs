{{!-- COMMON SCRIPTS --}}
<script src="../js/jquery.js"></script>
<script src="https://code.iconify.design/2/2.2.0/iconify.min.js"></script>
<script src="../js/popper.min.js"></script>
<script src="../js/loginMain.js"></script>
<script src="../js/bootstrap.min.js"></script>
<script src="../js/bootstrap.bundle.min.js"></script>
<script src="../vendor/js/global.min.js"></script>
<script src="../vendor/js/bootstrap-select.min.js"></script>
<script src="../vendor/js/custom.min.js"></script>
<script src="../vendor/js/deznav-init.js"></script>

{{!-- SWEET ALERT 2 --}}
<script src="https://3csigma.com/app_public_files/js/sweetalert2.min.js"></script>

{{!-- SELECTOR CON BUSCADOR --}}
<script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.8.7/chosen.jquery.min.js"></script>

{{!-- SCRIPTS PARA CALENDARIO --}}
<!-- DUET Picker -->
<script type="module" src="https://cdn.jsdelivr.net/npm/@duetds/date-picker@1.4.0/dist/duet/duet.esm.js"></script>
<script nomodule src="https://cdn.jsdelivr.net/npm/@duetds/date-picker@1.4.0/dist/duet/duet.js"></script>

{{#if wizarx}}
{{!-- Wizard Formularios Scripts --}}
<script src="../js/common_scripts.min.js"></script>
<script src="../js/velocity.min.js"></script>
<script src="../js/common_functions.js"></script>
<script src="../js/file-validator.js"></script>
<script src="../js/func_1.js"></script>
{{/if}}

<script src="../vendor/js/toastr.min.js"></script>

<!-- Chart Morris plugin files -->
<script src="../js/raphael-min.js"></script>
<script src="../js/morris.min.js"></script>
{{#if jsonDim}}
<script src="../js/morris-init.js"></script>
{{/if}}


{{!-- SCRIPTS - VALIDACIONES FICHA CLIENTE --}}
<script>
    (function () {
        $(document).ready(function () {
            // VAINAS PARA SELECTOR CON BUSCADOR
            function selectBuscarPais(id) {
                id.chosen({
                    no_results_text: "Sin resultados para",
                    allow_single_deselect: true,
                    placeholder_text_single: "Selecciona tu País/Nacionalidad",
                    width: '100%',
                });
            }
            const claseCajaPais = $('#pais')
            selectBuscarPais(claseCajaPais);

            function selectBuscar(id) {
                id.chosen({
                    no_results_text: "Sin resultados para",
                    allow_single_deselect: true,
                    placeholder_text_single: "Selecciona una opción",
                    width: '100%',
                });
            }
            const claseCajaGeneral = $('.sltBuscar')
            selectBuscar(claseCajaGeneral);

            // CAMPOS SOLO LETRAS
            $("input.campoLetras").bind('keypress', function (event) {
                let regex = new RegExp("^[a-zA-ZÀ-ÿ.\u00f1\u00d1 ]+$");
                let key = String.fromCharCode(!event.charCode ? event.which : event.charCode);
                if (!regex.test(key)) {
                    event.preventDefault();
                    return false;
                }
            });

            // CAMPOS SOLO NÚMEROS
            $("input.campoNum").bind('keypress', function (event) {
                let regex = new RegExp("^[0-9 .]+$");
                let key = String.fromCharCode(!event.charCode ? event.which : event.charCode);
                if (!regex.test(key)) {
                    event.preventDefault();
                    return false;
                }
            });

            // CheckButton Tiene Socios - ficha Cliente
            $("input.checkSocios").change(function () {
                //const numS = $("#cantidad_socios")
                const numS = document.getElementById("cantidad_socios")
                if ($(this).val() == "Si") {
                    numS.removeAttribute("disabled");
                    numS.style.background = "white";
                    numS.value = 1;
                } else {
                    numS.setAttribute("disabled", true);
                    numS.style.background = "#f2f2f2";
                    numS.value = 0;
                    numS.removeAttribute("min");
                }
            });

            // Actualizar Estado del Consultor
            $("#btnActualizarConsultor").click(function () {
                const estado = $("#estado_consul option:selected").val()
                const codigo = $("#codigo_consultor").val()
                const usuario_calendly = $("#urlCalendly").val()
                fetch('/actualizarConsultor', {
                    method: 'POST',
                    body: JSON.stringify({ codigo, estado, usuario_calendly }),
                    headers: { 'Content-Type': 'application/json' }
                }).then(res => res.json())
                    .catch(error => console.error('Error:', error))
                    .then(response => {
                        if (response) {
                            window.location.href = "/consultores";
                        } else {
                            Swal.fire(
                                'Error!',
                                'Ocurrió un problema al guardar los cambios, comunicate con soporte',
                                'error'
                            )
                        }
                    });
            })
            {{#if confirmarLogin}}
            Swal.fire({
                icon: 'success',
                title: 'Correo verificado',
                text: 'Has confirmado satisfactoriamente tu cuenta, ahora puedes iniciar sesión',
                
            })
            {{/if}}
        });
    })();
</script>